<?xml version="1.0" encoding="utf-8"?>
<table name="combat-sequence" version="0.1" module="-1">
	<el name="table" child="1" />
	<el name="record" child="normal, special">
		<attribute name="alias" type="String" required="y" max="70" />
		<attribute name="transit-cond" type="Seq" seq="TransitCond" repeat="2" />
		<attribute name="transit-action" type="Seq" seq="TransitAction" repeat="2" />
		<attribute name="transit-social" type="Int8" repeat="2" />
		<attribute name="hide-seq-start" type="Bool" />
		<attribute name="seq-start-social" type="Int8" />
		<attribute name="script-debug-enable" type="Bool" />
	</el>

	<el name="normal" child="action">
		<attribute name="id" type="Int8" key="y" required="y" min="1" max="10" />
		<attribute name="combat-distance" type="Int8" />
		<attribute name="max-count" type="Int16" default="1" />
		<attribute name="attack-limit" type="Int8" />
		<attribute name="range-attack-limit" type="Int8" />
		<attribute name="script-debug-enable" type="Bool" />


		<attribute name="special" type="Int8" repeat="5" />
		<attribute name="except-summoned" type="Bool" />
		<attribute name="change-min-msec" type="Msec" />
		<attribute name="hide-seq-start" type="Bool" />
		<attribute name="seq-start-social" type="Int8" />
		<attribute name="setup-position" type="Bool" />
		<attribute name="setup-dir" type="Seq">
			<case name="target" />
			<case name="n" />
			<case name="y" />
		</attribute>
	</el>
	<el name="special" child="action">
		<attribute name="id" type="Int8" key="y" required="y" min="1" max="10" />
		<attribute name="combat-distance" type="Int8" />
		<attribute name="max-count" type="Int16" default="1" />
		<attribute name="attack-limit" type="Int8" />
		<attribute name="range-attack-limit" type="Int8" />
		<attribute name="script-debug-enable" type="Bool" />


		<attribute name="condition" type="Seq16" seq="flag" repeat="2" />
		<attribute name="condition-subscription" type="Script_obj" repeat="2" />
		<attribute name="start-delay" type="Msec" />
		<attribute name="min-delay" type="Msec" />
	</el>
	<el name="action">
		<attribute name="combo" type="Bool" />
		<attribute name="duration" type="Msec" />
		<attribute name="event-step" type="Int8" />
		<attribute name="repeat" type="Int8" />
		<attribute name="immune-breaker-disable" type="Bool" />
		<attribute name="prob" type="Int8" describe="仅当上级节点是 Select 时才有意义" />

		<sub name="boss-link-laser-attack">
			<attribute name="target" type="Script_obj" required="y" />
			<attribute name="skill" type="Ref" ref="Skill" deprecated="y" />
			<attribute name="skill3" type="Ref" ref="Skill3" />
			<attribute name="except-condition" type="Seq16" seq="flag" />
			<attribute name="except-link-laser" type="Bool" />
			<attribute name="except-summoned" type="Bool" />
			<attribute name="except-top-hate" type="Bool" />
			<attribute name="replace-top-hate" type="Bool" />
			<attribute name="exclude-summoned" type="Bool" />

			
			<attribute name="is-target-skill-gather" type="Bool" />
			<attribute name="normal-bounce" type="Bool" />
			<attribute name="target-from" type="Script_obj" />
			<attribute name="target-to" type="Script_obj" />
			<attribute name="start-effect-from" type="Ref" ref="Effect" repeat="4" />
			<attribute name="start-effect-to" type="Ref" ref="Effect" repeat="4" />
			<attribute name="terminate-op" type="Bool" />
			<attribute name="terminate-cond" type="Seq" repeat="2">
				<case name="distance-max" />
				<case name="distance-min" />
				<case name="target-invoked-effect-flag" />
				<case name="target-leave" />
				<case name="target-over" />
			</attribute>
			<attribute name="terminate-value" type="Int32" repeat="2"/>
			<attribute name="terminate-flag" type="Seq16" seq="flag" repeat="2"/>
		</sub>
		<sub name="boss-multiground-attack">
			<attribute name="target" type="Script_obj" required="y" />
			<attribute name="skill" type="Ref" ref="Skill" deprecated="y" />
			<attribute name="skill3" type="Ref" ref="Skill3" />
			<attribute name="except-condition" type="Seq16" seq="flag" />
			<attribute name="except-link-laser" type="Bool" />
			<attribute name="except-summoned" type="Bool" />
			<attribute name="except-top-hate" type="Bool" />
			<attribute name="replace-top-hate" type="Bool" />
			<attribute name="exclude-summoned" type="Bool" />


			<attribute name="ground-pattern" type="Ref" ref="BossGroundAttackTargetPattern" repeat="5" />
			<attribute name="origin-pos" type="Vector32" />
		</sub>
		<sub name="boss-repeater-attack">
			<attribute name="target" type="Script_obj" required="y" />
			<attribute name="skill" type="Ref" ref="Skill" deprecated="y" />
			<attribute name="skill3" type="Ref" ref="Skill3" />
			<attribute name="except-condition" type="Seq16" seq="flag" />
			<attribute name="except-link-laser" type="Bool" />
			<attribute name="except-summoned" type="Bool" />
			<attribute name="except-top-hate" type="Bool" />
			<attribute name="replace-top-hate" type="Bool" />
			<attribute name="exclude-summoned" type="Bool" />
		</sub>
		<sub name="boss-simultaneous-caster-attack">
			<attribute name="target" type="Script_obj" required="y" />
			<attribute name="skill" type="Ref" ref="Skill" deprecated="y" />
			<attribute name="skill3" type="Ref" ref="Skill3" />
			<attribute name="except-condition" type="Seq16" seq="flag" />
			<attribute name="except-link-laser" type="Bool" />
			<attribute name="except-summoned" type="Bool" />
			<attribute name="except-top-hate" type="Bool" />
			<attribute name="replace-top-hate" type="Bool" />
			<attribute name="exclude-summoned" type="Bool" />
		</sub>
		<sub name="boss-simultaneous-ground-attack">
			<attribute name="target" type="Script_obj" required="y" />
			<attribute name="skill" type="Ref" ref="Skill" deprecated="y" />
			<attribute name="skill3" type="Ref" ref="Skill3" />
			<attribute name="except-condition" type="Seq16" seq="flag" />
			<attribute name="except-link-laser" type="Bool" />
			<attribute name="except-summoned" type="Bool" />
			<attribute name="except-top-hate" type="Bool" />
			<attribute name="replace-top-hate" type="Bool" />
			<attribute name="exclude-summoned" type="Bool" />
		</sub>
		<sub name="boss-gp-select-attack">
			<attribute name="target" type="Script_obj" required="y" />
			<attribute name="skill3" type="Ref" ref="Skill3" repeat="10" />
		</sub>
		<sub name="boss-rush-attack">
			<attribute name="target" type="Script_obj" required="y" />
			<attribute name="skill" type="Ref" ref="Skill" deprecated="y" />
			<attribute name="skill3" type="Ref" ref="Skill3" />

			<attribute name="target-area" type="Ref" ref="ZoneArea" />
			<attribute name="speed" type="Velocity" />
			<attribute name="pass-through" type="Bool" />
			<attribute name="arrived-effect" type="Ref" ref="Effect" />
			<attribute name="blocked-effect" type="Ref" ref="Effect" />
		</sub>
		<sub name="boss-sp-select-attack">
			<attribute name="sp" type="Int8" repeat="10" />
			<attribute name="skill" type="Ref" ref="Skill" repeat="10" deprecated="y" />
			<attribute name="skill3" type="Ref" ref="Skill3" repeat="10" />
		</sub>
		<sub name="change-set">
			<attribute name="stance" type="Int8" />
			<attribute name="stance-effect" type="Int8" repeat="3" />
			<attribute name="weapon" type="Int8" />
		</sub>
		<sub name="combat-move">
			<attribute name="move-msec" type="Msec" />
			<attribute name="move-type" type="Seq">
				<case name="retreat" />
				<case name="flee" />
			</attribute>
			<attribute name="range-within" type="Int16" />
		</sub>
		<sub name="detect-creature">
			<attribute name="radius" type="Distance" />
			<attribute name="height" type="Distance" />
		</sub>
		<sub name="do-indexed-social">
			<attribute name="social" type="Int8" />
		</sub>
		<sub name="do-social">
			<attribute name="social" type="Ref" ref="social" />
		</sub>
		<!-- 采集特殊目标作为 special-target 只能用于特殊序列 、序列内只能有一个此类型活动-->
		<sub name="gather-targets">
			<attribute name="condition" type="Seq16" seq="flag" />
			<attribute name="gather-count" type="Int8" />
			<attribute name="gather-rule" type="Seq">
				<case name="far" />
				<case name="near" />
				<case name="random" />
				<case name="rotate" />
				<case name="min-hate" />
			</attribute>
		</sub>
		<sub name="select">
			<attribute name="enter-prob" type="Int8" default="100" />
		</sub>
		<sub name="stay">
			<attribute name="target" type="Script_obj" required="y" />
		</sub>
		<sub name="use-ground-skill">
			<attribute name="target" type="Script_obj" required="y" />
			<attribute name="skill" type="Ref" ref="Skill" deprecated="y" />
			<attribute name="skill3" type="Ref" ref="Skill3" />
			<attribute name="except-condition" type="Seq16" seq="flag" />
			<attribute name="except-link-laser" type="Bool" />
			<attribute name="except-summoned" type="Bool" />
			<attribute name="except-top-hate" type="Bool" />
			<attribute name="replace-top-hate" type="Bool" />
			<attribute name="exclude-summoned" type="Bool" />

			
			<attribute name="target-area" type="Ref" ref="ZoneArea" />
			<attribute name="target-area-ref" type="Int32" />
			<attribute name="target-pos" type="Vector32" />
		</sub>
		<sub name="use-indexed-skill">
			<attribute name="skill" type="Int8" deprecated="y" />
			<attribute name="skill3" type="Int8" />
		</sub>
		<sub name="use-skill">
			<attribute name="target" type="Script_obj" required="y" />
			<attribute name="skill" type="Ref" ref="Skill" deprecated="y" />
			<attribute name="skill3" type="Ref" ref="Skill3" />
			<attribute name="except-condition" type="Seq16" seq="flag" />
			<attribute name="except-link-laser" type="Bool" />
			<attribute name="except-summoned" type="Bool" />
			<attribute name="except-top-hate" type="Bool" />
			<attribute name="replace-top-hate" type="Bool" />
			<attribute name="exclude-summoned" type="Bool" />


			<attribute name="target-area" type="Ref" ref="ZoneArea" />
			<attribute name="multi-skill3" type="Ref" ref="Skill3" repeat="15" />
			<attribute name="multi-target" type="Script_obj" />
		</sub>
		<sub name="use-soul-npc-skill">
		</sub>
	</el>
</table>